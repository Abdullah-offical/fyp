{% extends "core/base.html" %}
{% block title %}My Datasets — Vendor{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">My Datasets</h2>
    <a class="btn btn-primary" href="{% url 'blueprints:vendor_create' %}">+ New Dataset</a>
  </div>

  {% if items %}
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>ID</th>
            <th>Preview</th>
            <th>Title</th>
            <th>Status</th>
            <th>Bedrooms</th>
            <th>Bathrooms</th>
            <th>Total Area</th>
            <th>Updated</th>
            <th style="width:180px;">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for x in items %}
          <tr>
            <td>#{{ x.id }}</td>
            <td>
              {% if x.image %}
                <img src="{{ x.image.url }}" style="height:50px;width:auto;border-radius:6px;" alt="">
              {% else %}—{% endif %}
            </td>
            <td><a href="{% url 'blueprints:detail' x.id %}">{{ x.title|default:"(No title)" }}</a></td>
            <td>
              {% if x.status == "APPROVED" %}
                <span class="badge bg-success">Approved</span>
              {% elif x.status == "REJECTED" %}
                <span class="badge bg-danger">Rejected</span>
              {% else %}
                <span class="badge bg-warning text-dark">Pending</span>
              {% endif %}
            </td>
            <td>
              {{ x.bedroom1_size|default_if_none:"" }}{% if x.bedroom1_size %},{% endif %}
              {{ x.bedroom2_size|default_if_none:"" }}{% if x.bedroom2_size %},{% endif %}
              {{ x.bedroom3_size|default_if_none:"" }}{% if x.bedroom3_size %},{% endif %}
              {{ x.bedroom4_size|default_if_none:"" }}{% if x.bedroom4_size %},{% endif %}
              {{ x.bedroom5_size|default_if_none:"" }}
            </td>
            <td>
              {{ x.bathroom1_size|default_if_none:"" }}{% if x.bathroom1_size %},{% endif %}
              {{ x.bathroom2_size|default_if_none:"" }}{% if x.bathroom2_size %},{% endif %}
              {{ x.bathroom3_size|default_if_none:"" }}{% if x.bathroom3_size %},{% endif %}
              {{ x.bathroom4_size|default_if_none:"" }}{% if x.bathroom4_size %},{% endif %}
              {{ x.bathroom5_size|default_if_none:"" }}
            </td>
            <td>{{ x.total_area|default:"—" }}</td>
            <td>{{ x.updated_at|date:"Y-m-d H:i" }}</td>
            <td>
              <a class="btn btn-sm btn-outline-primary" href="{% url 'blueprints:vendor_edit' x.id %}">Edit</a>
              <a class="btn btn-sm btn-outline-secondary" href="{% url 'blueprints:detail' x.id %}">View</a>
              <a class="btn btn-sm btn-outline-danger" href="{% url 'blueprints:vendor_delete' x.id %}">Delete</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info">No datasets yet. Click “New Dataset”.</div>
  {% endif %}
</div>
{% endblock %}
